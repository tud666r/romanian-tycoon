<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>GTA Rom√¢nia</title>

    <!-- CSS stylesheet-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

    <!-- Font -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  </head>
  <body style="background-image: url('assets/images/Ferentari.jpg'); background-size: cover; background-repeat: no-repeat;">

    <div class="container mt-5">
      <div id="new-life">
        <h1 class="text-light">Via»õa de rom√¢n</h1>
        <p class="text-light">Bun venit √Æn Rom√¢nia, »õara tuturor posibilitƒÉ»õilor! SperƒÉm cƒÉ nu te vei sim»õi bine!</p>

        <br>

        <div class="form-group">
          <label for="inpPlayerFName" class="text-light">Prenumele personajului tƒÉu</label>
          <input type="text" id="inpPlayerFName" class="form-control" style="max-width: 20rem;">
        </div>

        <div class="form-group">
          <label for="inpPlayerLName" class="text-light">Numele de familie al personajului tƒÉu</label>
          <input type="text" id="inpPlayerLName" class="form-control" style="max-width: 20rem;">
        </div>

        <div class="form-group">
          <label for="selPlayerGender" class="text-light">Sexul personajului tƒÉu</label>
          <select id="selPlayerGender" class="form-control" style="max-width: 20rem;">
            <option value="1">BƒÉiat</option>
            <option value="2">FatƒÉ</option>
          </select>
        </div>

        <div class="form-group">
          <label for="selPlayerBirthPlace" class="text-light">Locul na»ôterii personajului tƒÉu</label>
          <select id="selPlayerBirthPlace" class="form-control" style="max-width: 20rem;">
            <option value="0">Bucure»ôti, Doroban»õi</option>
            <option value="1">Bucure»ôti, Titan</option>
            <option value="2">Bucure»ôti, Ferentari</option>
            <option value="3">Bucure»ôti, Colentina</option>
            <option value="4">Bucure»ôti, Pantelimon</option>
            <option value="5">Cluj-Napoca, jud. Cluj</option>
            <option value="6">B√¢rlad, jud. Vaslui</option>
            <option value="7">Murgeni, jud. Vaslui</option>
            <option value="8">Sili»ôtea, jud. Vaslui</option>
          </select>
        </div>

        <button class="btn btn-light btn-block mb-2" style="max-width: 20rem;" onclick="startLife()">Ie»ôi din mƒÉ-ta</button>

        <p class="text-light">ATEN»öIE: Acest joc este un pamflet, vƒÉ rugƒÉm sƒÉ √Æl trata»õi ca atare!</p>
      </div>
      <div id="game">
        <div class="card mb-2">
          <div class="card-body">
            <div class="row">
              <div class="col-6">
                <h5 id="viewPlayerName" class="card-title"></h5>
                <h6 id="viewPlayerAge" class="card-subtitle mb-2 text-muted"></h6>
                <p id="viewPlayerPlace" class="card-text"></p>
              </div>
              <div class="col-6">
                <p id="viewPlayerMoney" class="display-4 text-right text-success"></p>
              </div>
            </div>
          </div>
        </div>

        <textarea id="eventsLog" rows="10" style="width: 100%;" readonly></textarea>

        <div class="card mt-2">
          <div class="card-body">
            <nav class="nav nav-pills nav-justified">
              <a class="nav-item nav-link" href="#" onclick="view_page('jobs')"><span class="fa fa-school mr-2"></span>»òcoalƒÉ</a>
              <a class="nav-item nav-link" href="#" onclick="view_page('assets')"><span class="fa fa-home mr-2"></span>Bunuri</a>
              <a class="nav-item nav-link active" onclick="next()"><span class="fa fa-plus mr-2"></span>AvanseazƒÉ</a>
              <a class="nav-item nav-link" href="#" onclick="view_page('relationships')"><span class="fa fa-user-friends mr-2"></span>Rela»õii</a>
              <a class="nav-item nav-link" href="#" onclick="view_page('activities')"><span class="fa fa-ellipsis-h mr-2"></span>ActivitƒÉ»õi</a>
            </nav>
          </div>
        </div>

        <div class="card mt-2">
          <div class="card-body">
            <div class="row">
              <div class="col-3">
                <p id="viewPlayerHappiness" class="text-center mb-1">üòÉ <span class="badge badge-success"></span></p>
              </div>
              <div class="col-3">
                <p id="viewPlayerHealth" class="text-center mb-1">üß° <span class="badge badge-success"></span></p>
              </div>
              <div class="col-3">
                <p id="viewPlayerCleverness" class="text-center mb-1">üß† <span class="badge badge-primary"></span></p>
              </div>
              <div class="col-3">
                <p id="viewPlayerLook" class="text-center mb-1">ü§§ <span class="badge badge-success"></span></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="activities">
        <div class="card mb-2">
          <div class="card-body">
            <h5 class="card-title text-center"><span class="fa fa-ellipsis-h mr-2"></span>ActivitƒÉ»õi</h5>
          </div>
        </div>
        <div class="mb-2" style="overflow-y: scroll; height: 400px; width: 100%; background-color: white">
          <ul id="activities-list" class="list-group list-group-flush">

          </ul>
        </div>
        <button class="btn btn-primary btn-block" onclick="view_page('game')"><span class="fa fa-angle-left mr-2"></span>√énapoi</button>
      </div>
      <div id="bitches">
        <div class="card mb-2">
          <div class="card-body">
            <h5 class="card-title text-center">üëØ‚Äç Vagaboante</h5>
          </div>
        </div>
        <div class="mb-2" style="overflow-y: scroll; height: 400px; width: 100%; background-color: white">
          <ul id="bitchies-list" class="list-group list-group-flush">

          </ul>
        </div>
        <button class="btn btn-primary btn-block" onclick="view_page('activities')"><span class="fa fa-angle-left mr-2"></span>√énapoi</button>
      </div>
      <div id="festivals">
        <div class="card mb-2">
          <div class="card-body">
            <h5 class="card-title text-center">üé´ Festivale</h5>
          </div>
        </div>
        <div class="mb-2" style="overflow-y: scroll; height: 400px; width: 100%; background-color: white">
          <ul id="festivals-list" class="list-group list-group-flush">

          </ul>
        </div>
        <button class="btn btn-primary btn-block" onclick="view_page('activities')"><span class="fa fa-angle-left mr-2"></span>√énapoi</button>
      </div>
      <div id="relationships">
        <div class="card mb-2">
          <div class="card-body">
            <h5 class="card-title text-center"><span class="fa fa-user-friends mr-2"></span>Rela»õii</h5>
          </div>
        </div>
        <div class="mb-2" style="overflow-y: scroll; height: 400px; width: 100%; background-color: white">
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Cras justo odio</li>
            <li class="list-group-item">Dapibus ac facilisis in</li>
            <li class="list-group-item">Morbi leo risus</li>
            <li class="list-group-item">Porta ac consectetur ac</li>
            <li class="list-group-item">Vestibulum at eros</li>
          </ul>
        </div>
        <button class="btn btn-primary btn-block" onclick="view_page('game')"><span class="fa fa-angle-left mr-2"></span>√énapoi</button>
      </div>
      <div id="assets">
        <div class="card mb-2">
          <div class="card-body">
            <h5 class="card-title text-center"><span class="fa fa-home mr-2"></span>Bunuri</h5>
          </div>
        </div>
        <div class="mb-2" style="overflow-y: scroll; background-color: white">

        </div>
        <button class="btn btn-primary btn-block" onclick="view_page('game')"><span class="fa fa-angle-left mr-2"></span>√énapoi</button>
      </div>

      <div id="eventModal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 id="eventTitle" class="modal-title"></h5>
            </div>
            <div class="modal-body">
              <p id="eventText"></p>
              <button id="eventOption0" onclick="e.action(0)" class="btn btn-primary btn-block"></button>
              <button id="eventOption1" onclick="e.action(1)" onclick="" class="btn btn-primary btn-block"></button>
              <button id="eventOption2" onclick="e.action(2)" onclick="" class="btn btn-primary btn-block"></button>
              <button id="eventOption3" onclick="e.action(3)" onclick="" class="btn btn-primary btn-block"></button>
            </div>
            <div class="modal-footer">
            </div>
          </div>
        </div>
      </div>

      <script src="core/data.js"></script>
      <script src="core/view.js"></script>
      <script src="core/functions.js"></script>
      <script src="core/player.js"></script>
      <script src="core/event.js"></script>
      <script src="core/actor.js"></script>
      <script src="core/bitch.js"></script>
      <script src="core/goto.js"></script>

      <script>
        document.getElementById("eventsLog").value = "";

        var COUNT_ACTORS = 0;
        var COUNT_SIBLINGS = 0;

        var VIEWED_NEWS = 0;

        var VISITED_FESTIVALS = 0;

        var player;
        var actors = [];
        var bitches = [];

        var e;
        var movie;

        var news_history = [];
        var festivals_history = [];

        var activitiesList = document.getElementById('activities-list');
        for (let i = 0; i < MAX_ACTIVITIES; i ++)
        {
            let activitityItem = document.createElement('a');
            activitityItem.setAttribute('id', 'activity' + i);
            activitityItem.innerText = activities[i][ACTIVITY_NAME];
            activitityItem.classList.add('list-group-item');
            activitityItem.classList.add('disabled');
            activitiesList.appendChild(activitityItem);
        }

        let festivalsList = document.getElementById('festivals-list');
        for (let i = 0; i < MAX_FESTIVALS; i ++)
        {
            let festival = document.createElement('a');
            festival.setAttribute('id', 'festival' + i);
            festival.innerHTML = festivals[i][0] + '<span class="badge badge-success ml-2">' + festivals[i][1] + ' lei</span>'
            festival.classList.add('list-group-item');

            festivalsList.appendChild(festival);
        }

        function startLife()
        {
            let playerFName = document.getElementById('inpPlayerFName').value;
            let playerLName = document.getElementById('inpPlayerLName').value;

            if (playerFName.length == 0)
                playerFName = 'Sug';

            if (playerLName.length == 0)
                playerLName = 'Pula';

            let playerGender = document.getElementById('selPlayerGender').value;
            let playerPlace = document.getElementById('selPlayerBirthPlace').value;

            view = 'game';

            document.getElementById('game').style.display = 'block';
            document.getElementById('new-life').style.display = 'none';

            player = new Player(playerFName, playerLName, playerGender, playerPlace);

            journal_log('0 ani');

            let birthLog = 'Te-ai nƒÉscut √Æn ' + places[playerPlace][PLACE_NAME];

            let familyFinancialStatus = getRndInteger(1, 100);

            if (places[playerPlace][PLACE_POVERTY] >= 8 && places[playerPlace][PLACE_POVERTY] <= 10)
            {
                if (familyFinancialStatus >= 1 && familyFinancialStatus < 80)
                    familyFinancialStatus = VERY_POOR;
                else if (familyFinancialStatus >= 80 && familyFinancialStatus < 95)
                    familyFinancialStatus = POOR;
                else if (familyFinancialStatus >= 95 && familyFinancialStatus < 99)
                    familyFinancialStatus = AVERAGE;
                else if (familyFinancialStatus >= 99 && familyFinancialStatus <= 100)
                    familyFinancialStatus = RICH;
            }
            else if (places[playerPlace][PLACE_POVERTY] >= 6 && places[playerPlace][PLACE_POVERTY] < 8)
            {
                if (familyFinancialStatus >= 1 && familyFinancialStatus < 40)
                    familyFinancialStatus = VERY_POOR;
                else if (familyFinancialStatus >= 40 && familyFinancialStatus < 80)
                    familyFinancialStatus = POOR;
                else if (familyFinancialStatus >= 80 && familyFinancialStatus < 85)
                    familyFinancialStatus = AVERAGE;
                else if (familyFinancialStatus >= 85 && familyFinancialStatus <= 95)
                    familyFinancialStatus = RICH;
                else if (familyFinancialStatus >= 95 && familyFinancialStatus <= 100)
                    familyFinancialStatus = VERY_RICH;

                familyFinancialStatus = POOR;
            }
            else if (places[playerPlace][PLACE_POVERTY] >= 4 && places[playerPlace][PLACE_POVERTY] < 6)
            {
                if (familyFinancialStatus >= 1 && familyFinancialStatus < 20)
                    familyFinancialStatus = VERY_POOR;
                else if (familyFinancialStatus >= 20 && familyFinancialStatus < 50)
                    familyFinancialStatus = POOR;
                else if (familyFinancialStatus >= 50 && familyFinancialStatus < 75)
                    familyFinancialStatus = AVERAGE;
                else if (familyFinancialStatus >= 75 && familyFinancialStatus <= 90)
                    familyFinancialStatus = RICH;
                else if (familyFinancialStatus >= 90 && familyFinancialStatus <= 100)
                    familyFinancialStatus = VERY_RICH;
            }
            else if (places[playerPlace][PLACE_POVERTY] >= 2 && places[playerPlace][PLACE_POVERTY] < 4)
            {
                if (familyFinancialStatus >= 1 && familyFinancialStatus < 10)
                    familyFinancialStatus = VERY_POOR;
                else if (familyFinancialStatus >= 10 && familyFinancialStatus < 30)
                    familyFinancialStatus = POOR;
                else if (familyFinancialStatus >= 30 && familyFinancialStatus < 60)
                    familyFinancialStatus = AVERAGE;
                else if (familyFinancialStatus >= 60 && familyFinancialStatus <= 85)
                    familyFinancialStatus = RICH;
                else if (familyFinancialStatus >= 85 && familyFinancialStatus <= 100)
                    familyFinancialStatus = VERY_RICH;
            }
            else if (places[playerPlace][PLACE_POVERTY] >= 0 && places[playerPlace][PLACE_POVERTY] < 2)
            {
                if (familyFinancialStatus >= 1 && familyFinancialStatus < 5)
                    familyFinancialStatus = VERY_POOR;
                else if (familyFinancialStatus >= 10 && familyFinancialStatus < 20)
                    familyFinancialStatus = POOR;
                else if (familyFinancialStatus >= 20 && familyFinancialStatus < 50)
                    familyFinancialStatus = AVERAGE;
                else if (familyFinancialStatus >= 50 && familyFinancialStatus <= 80)
                    familyFinancialStatus = RICH;
                else if (familyFinancialStatus >= 80 && familyFinancialStatus <= 100)
                    familyFinancialStatus = VERY_RICH;
            }

            let motherFName = femaleNames[getRndInteger(0, MAX_FEMALE_NAMES - 1)];
            let motherAge = getRndInteger(18, 35) - Math.floor(places[playerPlace][PLACE_POVERTY] * 0.5);

            let fatherFName = maleNames[getRndInteger(0, MAX_MALE_NAMES - 1)];
            let fatherAge = getRndInteger(21, 40) - Math.floor(places[playerPlace][PLACE_POVERTY] * 0.3);

            let siblings = 0;

            if (familyFinancialStatus == VERY_POOR)
            {
                if (motherAge >= 16)
                    siblings = Math.min(12, getRndInteger(0, motherAge - 16));

                birthLog = birthLog + ', √Æntr-o familie foarte sƒÉracƒÉ.';
            }
            else if (familyFinancialStatus == POOR)
            {
                if (motherAge >= 19)
                    siblings = Math.min(6, getRndInteger(0, motherAge - 19));

                birthLog = birthLog + ', √Æntr-o familie sƒÉracƒÉ.';
            }
            else if (familyFinancialStatus == AVERAGE)
            {
                if (motherAge >= 24)
                    siblings = Math.min(3, getRndInteger(0, motherAge - 24));
            }
            else if (familyFinancialStatus == RICH)
            {
                if (motherAge >= 28)
                    siblings = Math.min(3, getRndInteger(0, motherAge - 28));

                birthLog = birthLog + ', √Æntr-o familie bogatƒÉ.';
            }
            else if (familyFinancialStatus == VERY_RICH)
            {
                if (motherAge >= 32)
                    siblings = Math.min(3, getRndInteger(0, motherAge - 32));

                birthLog = birthLog + ', √Æntr-o familie foarte bogatƒÉ.';
            }

            journal_log(birthLog);

            /* Mother */
            actors[COUNT_ACTORS ++] = new Actor(motherFName, playerLName, motherAge, FEMALE, MOTHER, familyFinancialStatus);
            journal_log('MƒÉ-ta e ' + actors[0].fName + ' √Æn v√¢rstƒÉ de ' + actors[0].Age + ' ani.');

            /* Father */
            actors[COUNT_ACTORS ++] = new Actor(fatherFName, playerLName, fatherAge, MALE, FATHER, familyFinancialStatus);
            journal_log('Tac-tu e ' + actors[1].fName + ' √Æn v√¢rstƒÉ de ' + actors[1].Age + ' ani.');

            for (var i = 0; i < siblings; i ++)
            {
                let Gender = getRndInteger(MALE, FEMALE);
                let Age = getRndInteger(1, Math.floor(motherAge / 4));
                let Name;

                if (Gender == FEMALE)
                {
                    Name = femaleNames[getRndInteger(0, MAX_FEMALE_NAMES - 1)];
                    journal_log('Ai o sorƒÉ ' + Name + ' √Æn v√¢rstƒÉ de ' + Age + ' ani.');
                }
                else
                {
                    Name = maleNames[getRndInteger(0, MAX_MALE_NAMES - 1)];
                    journal_log('Ai un frate ' + Name + ' √Æn v√¢rstƒÉ de ' + Age + ' ani.');
                }

                actors[COUNT_ACTORS ++] = new Actor(Name, playerLName, Age, Gender, SIBLING, familyFinancialStatus);
                COUNT_SIBLINGS ++;
            }

            updateInfoBar();
            updateStatsBar();
        }

        function next()
        {
            player.ageUp();
            journal_log('\r\n' + player.Age + ' ani');

            if (player.Age >= 2 && player.Age <= 6)
            {
                let r = getRndInteger(1, 6);

                switch (r)
                {
                    case 1:
                    {
                        let friendName = maleNames[getRndInteger(0, MAX_FEMALE_NAMES - 1)];
                        e = new Event("‚öΩ Fotbal", "Vecinul tƒÉu " + friendName + " te-a chemat sƒÉ juca»õi fotbal √Æn fa»õa blocului.", "FOOTBALL_CALLOUT", "AcceptƒÉ", "RefuzƒÉ-l »ôi joacƒÉ-te Roblox");
                        e.view();
                        break;
                    }

                    case 3:
                    {
                        e = new Event("üíâ Vaccin", "Medicul se apropie cu vaccinul de tine, pregƒÉtit sƒÉ te imunizeze.", "VACCINATION_TIME", "Stai cuminte »ôi acceptƒÉ-»õi soarta", "UrlƒÉ din to»õi plƒÉm√¢nii", "Love»ôte medicul");
                        e.view();
                        break;
                    }

                    case 6:
                    {
                        e = new Event("üÜò Urgen»õƒÉ majorƒÉ", "√én timp ce erai √Æn fa»õa blocului »ôi te jucai cu prietenii, »õi-a venit sƒÉ te pi»ôi.", "BATHROOM_EMERGENCY", "UrcƒÉ repede √Æn casƒÉ »ôi du-te la baie", "»öine-te p√¢nƒÉ te duci acasƒÉ", "GƒÉse»ôte un loc retras »ôi urineazƒÉ-te");
                        e.view();
                        break;
                    }
                }
            }

            movie = new Event("üé¨ Cinema", "E»ôti la cinema. " + festivals[fest][0] + ".", "GO_TO_MOVIE", "Vezi", "Neah!");

            for (let i = 0; i < MAX_ACTIVITIES; i ++)
            {
                let activitityItem = document.getElementById('activity' + i);
                if (player.Age >= activities[i][ACTIVITY_AGE]) {
                    activitityItem.classList.remove('disabled');

                    if (activities[i][ACTIVITY_VIEW] == "PAGE")
                        activitityItem.setAttribute('onclick', 'view_page("' + activities[i][ACTIVITY_ID] + '")');
                    else
                        activitityItem.setAttribute('onclick', activities[i][ACTIVITY_ID] + '.view()');
                }
            }

            for (let i = 0; i < MAX_FESTIVALS; i ++)
            {
                let festival = document.getElementById('festival' + i);
                if (player.Money >= festivals[i][1]) {
                    festival.classList.remove('disabled');
                    festival.setAttribute('onclick', 'gotofestival(' + i + ')');
                }
                else
                    festival.classList.add('disabled');
            }

            for (let i = 0; i < bitches.length; i ++)
                 document.getElementById('bitchOffer' + i).remove();

            let marketSize = getRndInteger(1, 6);

            let bitchiesList = document.getElementById('bitchies-list');
            for (let i = 0; i < marketSize; i ++)
            {
                bitches[i] = new Bitch(femaleNames[getRndInteger(0, MAX_FEMALE_NAMES - 1)], getRndInteger(1, 10));

                let bitchOffer = document.createElement('a');
                bitchOffer.setAttribute('id', 'bitchOffer' + i);
                bitchOffer.setAttribute('onclick', 'bitches[' + i + '].accept()');
                bitchOffer.innerHTML = bitches[i].Name + '<span class="badge badge-success ml-2">' + bitches[i].Price + ' lei</span>'
                bitchOffer.innerHTML = bitchOffer.innerHTML + '<span class="badge badge-primary ml-2">ü§§ ' + bitches[i].Look + '</span>';
                bitchOffer.innerHTML = bitchOffer.innerHTML + '<span class="badge badge-secondary ml-2">' + bitches[i].Age + ' ani</span>';
                bitchOffer.classList.add('list-group-item');

                if (player.Money < bitches[i].Price)
                  bitchOffer.classList.add('disabled');

                bitchiesList.appendChild(bitchOffer);
            }

            if (VIEWED_NEWS < MAX_NEWS)
            {
                let view_news = getRndInteger(1, 4);

                if (view_news == 1)
                {
                    let nws;
                    let w;

                    do
                    {
                       w = false;

                       nws = getRndInteger(0, MAX_NEWS - 1);

                       for (var i = 0; i < VIEWED_NEWS; i ++)
                          if (news_history[i] == nws)
                              w = true;

                    } while (w);

                    journal_log(news[nws]);
                    news_history[VIEWED_NEWS ++] = nws;
                }
            }

            for (var i = 0; i < COUNT_ACTORS; i ++)
                actors[i].ageUp();
        }

        function updateInfoBar()
        {
            document.getElementById('viewPlayerName').innerHTML = player.FName + ' ' + player.LName;
            document.getElementById('viewPlayerAge').innerHTML = player.Age + ' ani';
            document.getElementById('viewPlayerPlace').innerHTML = places[player.Place][PLACE_NAME];
            document.getElementById('viewPlayerMoney').innerHTML = player.Money + ' lei';
        }

        function updateStatsBar()
        {
            document.getElementById('viewPlayerHappiness').innerHTML = 'üòÉ <span class="badge badge-success">' + player.Happiness + '</span>';
            document.getElementById('viewPlayerHealth').innerHTML = 'üß° <span class="badge badge-success">' + player.Health + '</span>';
            document.getElementById('viewPlayerCleverness').innerHTML = 'üß† <span class="badge badge-primary">' + player.Cleverness + '</span>';
            document.getElementById('viewPlayerLook').innerHTML = 'ü§§ <span class="badge badge-success">' + player.Look + '</span>';
        }
      </script>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
  </body>
</html>
